import{d as I,z as v,A as M,a2 as N,c as l,m as S,a1 as z,s as L,a3 as j,x as A,e as p,N as E,i as U,r as V,g as q}from"./index-d5e8f552.js";import{a as D}from"./use-route-ab904f85.js";import{c as F,b as h,n as w,C as H,u as b,I as _}from"./index-eb528fff.js";import{P as G}from"./index-cd3cf607.js";import{L as J}from"./index-7766471a.js";let f=0;function K(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[Q,r]=F("toast"),R=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],W={icon:String,show:Boolean,type:h("text"),overlay:Boolean,message:w,iconSize:w,duration:H(2e3),position:h("middle"),teleport:[String,Object],wordBreak:String,className:b,iconPrefix:String,transition:h("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:b,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var X=I({name:Q,props:W,emits:["update:show"],setup(e,{emit:t,slots:o}){let c,n=!1;const u=()=>{const s=e.show&&e.forbidClick;n!==s&&(n=s,K(n))},d=s=>t("update:show",s),y=()=>{e.closeOnClick&&d(!1)},m=()=>clearTimeout(c),g=()=>{const{icon:s,type:a,iconSize:C,iconPrefix:T,loadingType:B}=e;if(s||a==="success"||a==="fail")return l(_,{name:s||a,size:C,class:r("icon"),classPrefix:T},null);if(a==="loading")return l(J,{class:r("loading"),size:C,type:B},null)},x=()=>{const{type:s,message:a}=e;if(o.message)return l("div",{class:r("text")},[o.message()]);if(L(a)&&a!=="")return s==="html"?l("div",{key:0,class:r("text"),innerHTML:String(a)},null):l("div",{class:r("text")},[a])};return v(()=>[e.show,e.forbidClick],u),v(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(c=setTimeout(()=>{d(!1)},e.duration))}),M(u),N(u),()=>l(G,S({class:[r([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:m,"onUpdate:show":d},z(e,R)),{default:()=>[g(),x()]})}});function Y(){const e=A({show:!1}),t=n=>{e.show=n},o=n=>{p(e,n,{transitionAppear:!0}),t(!0)},c=()=>t(!1);return D({open:o,close:c,toggle:t}),{open:o,close:c,state:e,toggle:t}}function Z(e){const t=j(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const $={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let i=[],ee=!1,O=p({},$);const te=new Map;function P(e){return U(e)?e:{message:e}}function oe(){const{instance:e,unmount:t}=Z({setup(){const o=V(""),{open:c,state:n,close:u,toggle:d}=Y(),y=()=>{},m=()=>l(X,S(n,{onClosed:y,"onUpdate:show":d}),null);return v(o,g=>{n.message=g}),q().render=m,{open:c,close:u,message:o}}});return e}function ne(){if(!i.length||ee){const e=oe();i.push(e)}return i[i.length-1]}function se(e={}){if(!E)return{};const t=ne(),o=P(e);return t.open(p({},O,te.get(o.type||O.type),o)),t}const k=e=>t=>se(p({type:e},P(t))),de=k("loading"),fe=k("success"),me=k("fail"),ge=e=>{i.length&&(e?(i.forEach(t=>{t.close()}),i=[]):i[0].close())};export{se as a,me as b,ge as c,fe as d,X as e,de as s};
