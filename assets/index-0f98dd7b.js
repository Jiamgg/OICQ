import{c as G,b as N,n as A,t as U,u as j,I as O,w as H,p,F as ie,d as Pe,s as Te,m as Me,f as Ae,e as te,r as Le,B as Re}from"./index-cdaf4ddc.js";/* empty css              */import{B as $e}from"./index-01ed8836.js";import{e as oe,d as D,c as o,s as E,u as Fe,i as Ne,t as Oe,v as De,x as se,r as K,a as We,b as F,y as ze,C as qe,z as je,A as pe,B as q,D as Ue,E as ne,m as ce,q as ue,F as Ge,f as He,o as Ke,h as Je,w as J,n as Ye,G as Qe,_ as Xe}from"./index-b9eaef7b.js";import{b as Ze,d as et}from"./function-call-f7babc93.js";import"./index-a923f7dc.js";import{r as tt,u as nt}from"./use-route-db9da3b0.js";import{u as at}from"./use-id-a18ee384.js";import{u as de}from"./use-expose-b6c800c8.js";import"./index-81d5f77e.js";import"./use-touch-c3742899.js";const[lt,R]=G("cell"),fe={tag:N("div"),icon:String,size:String,title:A,value:A,label:A,center:Boolean,isLink:Boolean,border:U,required:Boolean,iconPrefix:String,valueClass:j,labelClass:j,titleClass:j,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},rt=oe({},fe,tt);var it=D({name:lt,props:rt,setup(e,{slots:n}){const l=nt(),d=()=>{if(n.label||E(e.label))return o("div",{class:[R("label"),e.labelClass]},[n.label?n.label():e.label])},r=()=>{var f;if(n.title||E(e.title)){const h=(f=n.title)==null?void 0:f.call(n);return Array.isArray(h)&&h.length===0?void 0:o("div",{class:[R("title"),e.titleClass],style:e.titleStyle},[h||o("span",null,[e.title]),d()])}},s=()=>{const f=n.value||n.default;if(f||E(e.value))return o("div",{class:[R("value"),e.valueClass]},[f?f():o("span",null,[e.value])])},V=()=>{if(n.icon)return n.icon();if(e.icon)return o(O,{name:e.icon,class:R("left-icon"),classPrefix:e.iconPrefix},null)},C=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const f=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return o(O,{name:f,class:R("right-icon")},null)}};return()=>{var f;const{tag:h,size:m,center:I,border:T,isLink:L,required:k}=e,P=(f=e.clickable)!=null?f:L,a={center:I,required:k,clickable:P,borderless:!T};return m&&(a[m]=!!m),o(h,{class:R(a),role:P?"button":void 0,tabindex:P?0:void 0,onClick:l},{default:()=>{var u;return[V(),r(),s(),C(),(u=n.extra)==null?void 0:u.call(n)]}})}}});const ot=H(it),[st,ct]=G("form"),ut={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:A,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:U,showErrorMessage:U,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var dt=D({name:st,props:ut,emits:["submit","failed"],setup(e,{emit:n,slots:l}){const{children:d,linkChildren:r}=Fe(ie),s=a=>a?d.filter(u=>a.includes(u.name)):d,V=a=>new Promise((u,v)=>{const _=[];s(a).reduce(($,W)=>$.then(()=>{if(!_.length)return W.validate().then(M=>{M&&_.push(M)})}),Promise.resolve()).then(()=>{_.length?v(_):u()})}),C=a=>new Promise((u,v)=>{const _=s(a);Promise.all(_.map(S=>S.validate())).then(S=>{S=S.filter(Boolean),S.length?v(S):u()})}),f=a=>{const u=d.find(v=>v.name===a);return u?new Promise((v,_)=>{u.validate().then(S=>{S?_(S):v()})}):Promise.reject()},h=a=>typeof a=="string"?f(a):e.validateFirst?V(a):C(a),m=a=>{typeof a=="string"&&(a=[a]),s(a).forEach(v=>{v.resetValidation()})},I=()=>d.reduce((a,u)=>(a[u.name]=u.getValidationStatus(),a),{}),T=(a,u)=>{d.some(v=>v.name===a?(v.$el.scrollIntoView(u),!0):!1)},L=()=>d.reduce((a,u)=>(u.name!==void 0&&(a[u.name]=u.formValue.value),a),{}),k=()=>{const a=L();h().then(()=>n("submit",a)).catch(u=>{n("failed",{values:a,errors:u}),e.scrollToError&&u[0].name&&T(u[0].name)})},P=a=>{p(a),k()};return r({props:e}),de({submit:k,validate:h,getValues:L,scrollToField:T,resetValidation:m,getValidationStatus:I}),()=>{var a;return o("form",{class:ct(),onSubmit:P},[(a=l.default)==null?void 0:a.call(l)])}}});const ft=H(dt);function me(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function mt(e,n){if(me(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function gt(e,n){return new Promise(l=>{const d=n.validator(e,n);if(Oe(d)){d.then(l);return}l(d)})}function ae(e,n){const{message:l}=n;return De(l)?l(e,n):l||""}function ht({target:e}){e.composing=!0}function le({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function bt(e,n){const l=Pe();e.style.height="auto";let d=e.scrollHeight;if(Ne(n)){const{maxHeight:r,minHeight:s}=n;r!==void 0&&(d=Math.min(d,r)),s!==void 0&&(d=Math.max(d,s))}d&&(e.style.height=`${d}px`,Te(l))}function vt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function B(e){return[...e].length}function Y(e,n){return[...e].slice(0,n).join("")}const[yt,x]=G("field"),_t={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:A,formatter:Function,clearIcon:N("clear"),modelValue:Me(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:N("focus"),formatTrigger:N("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},St=oe({},fe,_t,{rows:A,type:N("text"),rules:Array,autosize:[Boolean,Object],labelWidth:A,labelClass:j,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var xt=D({name:yt,props:St,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:l}){const d=at(),r=se({status:"unvalidated",focused:!1,validateMessage:""}),s=K(),V=K(),C=K(),{parent:f}=We(ie),h=()=>{var t;return String((t=e.modelValue)!=null?t:"")},m=t=>{if(E(e[t]))return e[t];if(f&&E(f.props[t]))return f.props[t]},I=F(()=>{const t=m("readonly");if(e.clearable&&!t){const c=h()!=="",i=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return c&&i}return!1}),T=F(()=>C.value&&l.input?C.value():e.modelValue),L=t=>t.reduce((c,i)=>c.then(()=>{if(r.status==="failed")return;let{value:g}=T;if(i.formatter&&(g=i.formatter(g,i)),!mt(g,i)){r.status="failed",r.validateMessage=ae(g,i);return}if(i.validator)return me(g)&&i.validateEmpty===!1?void 0:gt(g,i).then(b=>{b&&typeof b=="string"?(r.status="failed",r.validateMessage=b):b===!1&&(r.status="failed",r.validateMessage=ae(g,i))})}),Promise.resolve()),k=()=>{r.status="unvalidated",r.validateMessage=""},P=()=>n("endValidate",{status:r.status,message:r.validateMessage}),a=(t=e.rules)=>new Promise(c=>{k(),t?(n("startValidate"),L(t).then(()=>{r.status==="failed"?(c({name:e.name,message:r.validateMessage}),P()):(r.status="passed",c(),P())})):c()}),u=t=>{if(f&&e.rules){const{validateTrigger:c}=f.props,i=ne(c).includes(t),g=e.rules.filter(b=>b.trigger?ne(b.trigger).includes(t):i);g.length&&a(g)}},v=t=>{var c;const{maxlength:i}=e;if(E(i)&&B(t)>+i){const g=h();if(g&&B(g)===+i)return g;const b=(c=s.value)==null?void 0:c.selectionEnd;if(r.focused&&b){const y=[...t],w=y.length-+i;return y.splice(b-w,w),y.join("")}return Y(t,+i)}return t},_=(t,c="onChange")=>{const i=t;t=v(t);const g=B(i)-B(t);if(e.type==="number"||e.type==="digit"){const y=e.type==="number";t=Ae(t,y,y)}let b=0;if(e.formatter&&c===e.formatTrigger){const{formatter:y,maxlength:w}=e;if(t=y(t),E(w)&&B(t)>+w&&(t=Y(t,+w)),s.value&&r.focused){const{selectionEnd:z}=s.value,ee=Y(i,z);b=B(y(ee))-B(ee)}}if(s.value&&s.value.value!==t)if(r.focused){let{selectionStart:y,selectionEnd:w}=s.value;if(s.value.value=t,E(y)&&E(w)){const z=B(t);g?(y-=g,w-=g):b&&(y+=b,w+=b),s.value.setSelectionRange(Math.min(y,z),Math.min(w,z))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},S=t=>{t.target.composing||_(t.target.value)},$=()=>{var t;return(t=s.value)==null?void 0:t.blur()},W=()=>{var t;return(t=s.value)==null?void 0:t.focus()},M=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&bt(t,e.autosize)},ge=t=>{r.focused=!0,n("focus",t),q(M),m("readonly")&&$()},he=t=>{r.focused=!1,_(h(),"onBlur"),n("blur",t),!m("readonly")&&(u("onBlur"),q(M),Le())},Q=t=>n("clickInput",t),be=t=>n("clickLeftIcon",t),ve=t=>n("clickRightIcon",t),ye=t=>{p(t),n("update:modelValue",""),n("clear",t)},X=F(()=>{if(typeof e.error=="boolean")return e.error;if(f&&f.props.showError&&r.status==="failed")return!0}),_e=F(()=>{const t=m("labelWidth"),c=m("labelAlign");if(t&&c!=="top")return{width:te(t)}}),Se=t=>{t.keyCode===13&&(!(f&&f.props.submitOnEnter)&&e.type!=="textarea"&&p(t),e.type==="search"&&$()),n("keypress",t)},Z=()=>e.id||`${d}-input`,xe=()=>r.status,Ve=()=>{const t=x("control",[m("inputAlign"),{error:X.value,custom:!!l.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(l.input)return o("div",{class:t,onClick:Q},[l.input()]);const c={id:Z(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:m("disabled"),readonly:m("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${d}-label`:void 0,onBlur:he,onFocus:ge,onInput:S,onClick:Q,onChange:le,onKeypress:Se,onCompositionend:le,onCompositionstart:ht};return e.type==="textarea"?o("textarea",c,null):o("input",ce(vt(e.type),c),null)},we=()=>{const t=l["left-icon"];if(e.leftIcon||t)return o("div",{class:x("left-icon"),onClick:be},[t?t():o(O,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ce=()=>{const t=l["right-icon"];if(e.rightIcon||t)return o("div",{class:x("right-icon"),onClick:ve},[t?t():o(O,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ie=()=>{if(e.showWordLimit&&e.maxlength){const t=B(h());return o("div",{class:x("word-limit")},[o("span",{class:x("word-num")},[t]),ue("/"),e.maxlength])}},ke=()=>{if(f&&f.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const c=l["error-message"],i=m("errorMessageAlign");return o("div",{class:x("error-message",i)},[c?c({message:t}):t])}},Be=()=>{const t=m("labelWidth"),c=m("labelAlign"),i=m("colon")?":":"";if(l.label)return[l.label(),i];if(e.label)return o("label",{id:`${d}-label`,for:l.input?void 0:Z(),onClick:g=>{p(g),W()},style:c==="top"&&t?{width:te(t)}:void 0},[e.label+i])},Ee=()=>[o("div",{class:x("body")},[Ve(),I.value&&o(O,{ref:V,name:e.clearIcon,class:x("clear")},null),Ce(),l.button&&o("div",{class:x("button")},[l.button()])]),Ie(),ke()];return de({blur:$,focus:W,validate:a,formValue:T,resetValidation:k,getValidationStatus:xe}),ze(qe,{customValue:C,resetValidation:k,validateWithTrigger:u}),je(()=>e.modelValue,()=>{_(h()),k(),u("onChange"),q(M)}),pe(()=>{_(h(),e.formatTrigger),q(M)}),Ue("touchstart",ye,{target:F(()=>{var t;return(t=V.value)==null?void 0:t.$el})}),()=>{const t=m("disabled"),c=m("labelAlign"),i=we(),g=()=>{const b=Be();return c==="top"?[i,b].filter(Boolean):b||[]};return o(ot,{size:e.size,class:x({error:X.value,disabled:t,[`label-${c}`]:c}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:_e.value,valueClass:x("value"),titleClass:[x("label",[c,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:i&&c!=="top"?()=>i:null,title:g,value:Ee,extra:l.extra})}}});const Vt=H(xt),[wt,re]=G("cell-group"),Ct={title:String,inset:Boolean,border:U};var It=D({name:wt,inheritAttrs:!1,props:Ct,setup(e,{slots:n,attrs:l}){const d=()=>{var s;return o("div",ce({class:[re({inset:e.inset}),{[Re]:e.border&&!e.inset}]},l),[(s=n.default)==null?void 0:s.call(n)])},r=()=>o("div",{class:re("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?o(Ge,null,[r(),d()]):d()}});const kt=H(It);const Bt={class:"box"},Et={style:{margin:"16px"}},Pt=D({__name:"index",setup(e){const n=He(),l=se({userName:"",passWord:""}),d=s=>{if(s!="admin")return"用户名不存在"},r=s=>{if(s.passWord!="admin123")return Ze("密码错误");Qe.set("userInfo",JSON.stringify(s)),n.replace("/"),et("登陆成功")};return(s,V)=>{const C=Vt,f=kt,h=$e,m=ft;return Ke(),Je("div",Bt,[o(m,{onSubmit:r,class:"subClass"},{default:J(()=>[o(f,{inset:""},{default:J(()=>[o(C,{modelValue:l.userName,"onUpdate:modelValue":V[0]||(V[0]=I=>l.userName=I),modelModifiers:{trim:!0},name:"userName",label:"用户名：",placeholder:"请输入用户名",rules:[{validator:d,required:!0,message:"用户名不能为空"}]},null,8,["modelValue","rules"]),o(C,{modelValue:l.passWord,"onUpdate:modelValue":V[1]||(V[1]=I=>l.passWord=I),modelModifiers:{trim:!0},type:"password",name:"passWord",label:"密码：",placeholder:"请输入密码",rules:[{required:!0,message:"密码不能为空"}]},null,8,["modelValue"])]),_:1}),Ye("div",Et,[o(h,{round:"",block:"",type:"primary","native-type":"submit",color:"#fd85bf"},{default:J(()=>[ue(" 提交 ")]),_:1})])]),_:1})])}}});const zt=Xe(Pt,[["__scopeId","data-v-71dc1904"]]);export{zt as default};
