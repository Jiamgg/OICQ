System.register(["./index-legacy-5cfddaf1.js","./index-legacy-6ae413af.js"],(function(e,o){"use strict";var a,r,n,i,l,t,c,d,v,s,g,u,m,f,h,p,b,y,z,_,x;return{setters:[e=>{a=e.c,r=e.n,n=e.t,i=e.b,l=e.e,t=e.I,c=e.w},e=>{d=e.d,v=e.r,s=e.g,g=e.b,u=e.z,m=e.N,f=e.P,h=e.A,p=e.B,b=e.c,y=e.s,z=e.X,_=e.ac,x=e.m}],execute:function(){var o=document.createElement("style");o.textContent=":root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background: var(--van-background);--van-image-loading-icon-size: .85333rem;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: .85333rem;--van-image-error-icon-color: var(--van-gray-4)}.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image--block{display:block}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}\n",document.head.appendChild(o);const[w,k]=a("image"),S={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:r,height:r,radius:r,lazyLoad:Boolean,iconSize:r,showError:n,errorIcon:i("photo-fail"),iconPrefix:String,showLoading:n,loadingIcon:i("photo")};var L=d({name:w,props:S,emits:["load","error"],setup(e,{emit:o,slots:a}){const r=v(!1),n=v(!0),i=v(),{$Lazyload:c}=s().proxy,d=g((()=>{const o={width:l(e.width),height:l(e.height)};return y(e.radius)&&(o.overflow="hidden",o.borderRadius=l(e.radius)),o}));u((()=>e.src),(()=>{r.value=!1,n.value=!0}));const w=e=>{n.value&&(n.value=!1,o("load",e))},S=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:i.value,enumerable:!0}),w(e)},L=e=>{r.value=!0,n.value=!1,o("error",e)},j=(o,a,r)=>r?r():b(t,{name:o,size:e.iconSize,class:a,classPrefix:e.iconPrefix},null),I=()=>{if(r.value||!e.src)return;const o={alt:e.alt,class:k("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?z(b("img",x({ref:i},o),null),[[_("lazy"),e.src]]):b("img",x({ref:i,src:e.src,onLoad:w,onError:L},o),null)},P=({el:e})=>{const o=()=>{e===i.value&&n.value&&S()};i.value?o():p(o)},E=({el:e})=>{e!==i.value||r.value||L()};return c&&m&&(c.$on("loaded",P),c.$on("error",E),f((()=>{c.$off("loaded",P),c.$off("error",E)}))),h((()=>{p((()=>{var o;(null==(o=i.value)?void 0:o.complete)&&!e.lazyLoad&&S()}))})),()=>{var o;return b("div",{class:k({round:e.round,block:e.block}),style:d.value},[I(),n.value&&e.showLoading?b("div",{class:k("loading")},[j(e.loadingIcon,k("loading-icon"),a.loading)]):r.value&&e.showError?b("div",{class:k("error")},[j(e.errorIcon,k("error-icon"),a.error)]):void 0,null==(o=a.default)?void 0:o.call(a)])}}});e("I",c(L))}}}));
